var app=angular.module("app",["ngMaterial"]);angular.module("app").controller("TodosController",["$scope","TodosFactory",function(o,t){o.todos=[],o.ready=!1,o.showCompleteds=!0,o.getTodos=function(e){o.showCompleteds?t.list().then(function(t){o.todos=t,o.ready=!0}):t.hideCompleteds().then(function(t){o.todos=t,o.ready=!0})},o.addTodo=function(){var e={};o.new_todo.$valid?(e.id=Date.now()+"",e.title=o.title,e.date=(new Date).toLocaleDateString("en-GB"),e.completed=!1):alert("Título obrigatório"),o.todos.push(e),o.title="",t.add(e).then(o.getTodos)},o.removeTodo=function(e){t.remove(e.id);var n=o.todos.indexOf(e);o.todos.splice(n,1)},o.completeTodo=function(o){t.change(o)},o.removeCompleteds=function(){t.removeCompleteds().then(o.getTodos)},o.getTodos(o.showCompleteds)}]),angular.module("app").factory("TodosFactory",["$q","$http",function(o,t){return{list:function(){var e=o.defer();return t.get("https://todo-list-78110.firebaseio.com/todos.json").then(function(o){var t=[];angular.forEach(o.data,function(o,e){o.id=e,t.push(o)}),e.resolve(t)}),e.promise},add:function(o){var e=o.id;return delete o.id,t.put("https://todo-list-78110.firebaseio.com/todos/"+e+".json",o)},change:function(o){var e=o.id,n=!o.completed;return t.put("https://todo-list-78110.firebaseio.com/todos/"+e+"/completed.json",n)},remove:function(o){t.delete("https://todo-list-78110.firebaseio.com/todos/"+o+".json")},hideCompleteds:function(){var e=o.defer();return t.get("https://todo-list-78110.firebaseio.com/todos.json").then(function(o){var t=[];angular.forEach(o.data,function(o,e){o.id=e,o.completed||t.push(o)}),e.resolve(t)}),e.promise},removeCompleteds:function(){var e=o.defer();return t.get("https://todo-list-78110.firebaseio.com/todos.json").then(function(o){var n=[];angular.forEach(o.data,function(o,e){o.id=e,o.completed?t.delete("https://todo-list-78110.firebaseio.com/todos/"+e+".json"):n.push(o)}),e.resolve(n)}),e.promise}}}]);