var app=angular.module("app",["todos-directives","ngMaterial"]);angular.module("app").controller("TodosController",["$scope","TodosFactory",function(t,e){t.todos=[],t.ready=!1,t.showCompleteds=!0;var o=function(){e.list(t.showCompleteds).then(function(e){t.todos=e,t.ready=!0})};t.addTodo=function(){var n={};t.new_todo.$valid&&(n.id=Date.now()+"",n.title=t.title,n.date=(new Date).toLocaleDateString("en-GB"),n.completed=!1,t.todos.push(n),t.title=null,e.add(n).then(o),t.new_todo.$setPristine(),t.new_todo.$setUntouched())},t.removeTodo=function(o){e.remove(o);var n=t.todos.indexOf(o);t.todos.splice(n,1)},t.completeTodo=function(t){e.change(t).then(o)},t.removeCompleteds=function(){e.removeCompleteds().then(o)},t.listCompleteds=function(){o()},o()}]);var app=angular.module("todos-directives",[]);app.directive("addTodoForm",function(){return{restrict:"E",templateUrl:"views/add-todo.html"}}),app.directive("loading",function(){return{retrict:"AE",templateUrl:"common/loading.html"}}),app.directive("listTodos",function(){return{restrict:"E",templateUrl:"views/list-todos.html"}}),angular.module("app").factory("TodosFactory",["$http","$q",function(t,e){var o="https://polar-forest-11830.herokuapp.com/api";return{list:function(){var n=e.defer();return t.get(o+"/todos").then(function(t){var e=[];angular.forEach(t.data,function(t,o){t.id=o;t.completed;t.date=new Date(t.date).toLocaleDateString(),e.push(t)}),n.resolve(e)}),n.promise},add:function(e){var n={title:e.title,completed:!1,date:Date.now()};return t.post(o+"/todos",n)},remove:function(e){return t.delete(o+"/todos/"+e._id)},change:function(e){e.completed,e.completed;var n={completed:!e.completed,title:e.title};return t.put(o+"/todos/"+e._id,n)},removeCompleteds:function(){return t.get(o+"/todos").then(function(e){angular.forEach(e.data,function(e,n){e.id=n,e.completed&&t.delete(o+"/todos/"+e._id)})})}}}]);