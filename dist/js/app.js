var app=angular.module("app",["todos-directives","ngMaterial"]);angular.module("app").controller("TodosController",["$scope","TodosFactory","TodosFactoryV2",function(t,o,e){t.todos=[],t.ready=!1,t.showCompleteds=!0;var n=function(){e.list(t.showCompleteds).then(function(o){t.todos=o,t.ready=!0})};t.addTodo=function(){var o={};t.new_todo.$valid&&(o.id=Date.now()+"",o.title=t.title,o.date=(new Date).toLocaleDateString("en-GB"),o.completed=!1,t.todos.push(o),t.title=null,e.add(o).then(n),t.new_todo.$setPristine(),t.new_todo.$setUntouched())},t.removeTodo=function(o){e.remove(o);var n=t.todos.indexOf(o);t.todos.splice(n,1)},t.completeTodo=function(t){e.change(t).then(n)},t.removeCompleteds=function(){e.removeCompleteds().then(n)},t.listCompleteds=function(){n()},n()}]);var app=angular.module("todos-directives",[]);app.directive("addTodoForm",function(){return{restrict:"E",templateUrl:"views/add-todo.html"}}),app.directive("loading",function(){return{retrict:"AE",templateUrl:"common/loading.html"}}),app.directive("listTodos",function(){return{restrict:"E",templateUrl:"views/list-todos.html"}}),angular.module("app").factory("TodosFactory",["$q","$http",function(t,o){var e="https://todo-list-78110.firebaseio.com";return{list:function(n){var d=t.defer();return o.get(e+"/todos.json").then(function(t){var o=[];angular.forEach(t.data,function(t,e){t.id=e;var d=t.completed;n?o.push(t):d||o.push(t)}),d.resolve(o)}),d.promise},add:function(t){var n=t.id;return delete t.id,o.put(e+"/todos/"+n+".json",t)},change:function(t){var n=t.id;return completed=!t.completed,o.put(e+"/todos/"+n+"/completed.json",completed)},remove:function(t){o.delete(e+"/todos/"+t.id+".json")},removeCompleteds:function(){o.get(e+"/todos.json").then(function(t){angular.forEach(t.data,function(t,n){t.id=n,t.completed&&o.delete(e+"/todos/"+n+".json")})})}}}]),angular.module("app").factory("TodosFactoryV2",["$http","$q",function(t,o){var e="https://polar-forest-11830.herokuapp.com/api";return{list:function(n){var d=o.defer();return t.get(e+"/todos").then(function(t){var o=[];angular.forEach(t.data,function(t,e){t.id=e;var d=t.completed;t.date=new Date(t.date).toLocaleDateString(),n?o.push(t):d||o.push(t)}),d.resolve(o)}),d.promise},add:function(o){var n={title:o.title,completed:!1,date:Date.now()};return t.post(e+"/todos",n)},remove:function(o){return t.delete(e+"/todos/"+o._id)},change:function(o){o.completed,o.completed;var n={completed:!o.completed,title:o.title};return t.put(e+"/todos/"+o._id,n)},removeCompleteds:function(){return t.get(e+"/todos").then(function(o){angular.forEach(o.data,function(o,n){o.id=n,o.completed&&t.delete(e+"/todos/"+o._id)})})}}}]);